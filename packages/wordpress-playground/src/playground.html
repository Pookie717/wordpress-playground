<!DOCTYPE html>
<html>
  <head>
    <title>WordPress Playground</title>
  </head>
  <body class="is-loading">
    <script>
     if (window.top!=window.self) document.body.classList.add('is-embedded');
    </script>

    <div id="test-snippets"></div>

    <div id="app-root" class="full-window"></div>
    <div id="overlay"></div>
    <div id="import-window" class="modal" aria-hidden="true" aria-describedby='import-window-description'>
      <div class='screenreader-text' id='import-window-description'>
        This is a dialog window which overlays the main content of the page. The modal begins with a heading 2 called &quot;Import Playground&quot;. Pressing the Close Import Window will close the modal and bring you back to where you were on the page.
      </div>
      <div class="modal-inner">
        <form id="import-playground-form">
          <button id="import-close-modal--btn" class="btn btn-close" aria-label="Close import window">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="32" height="32" aria-hidden="true" focusable="false">
              <path d="M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"></path>
            </svg>
          </button>
          <h2 tabindex="0">Import Playground</h2>
          <p class="modal-text">
            You may import a previously exported WordPress Playground instance here.
          </p>
          <p class="modal-text">
            <strong>Known Limitations</strong><br/>
            <ul class="modal-text-list">
              <li>Styling changes may take up to one minute to update.</li><br/>
              <li>Migrating between different WordPress versions is not supported.</li><br/>
              <li>Media files, options/users, and plugin state will not be included.</li>
            </ul>
          </p>
          <div class="inputs-container">
            <input type="file" id="import-select-file" style="display:none;" accept="application/zip"/>
            <label for="import-select-file" class="file-input-label">
              <div id="import-select-file--text" class="file-input-text">No File Selected</div>
              <button id="import-select-file--btn" class="btn">Choose File</button>
            </label>
            <button id="import-submit--btn" disabled="true" class="btn">Import</button>
          </div>
        </form>
        <div class="migration-controls">
          <button id="export-playground--btn" class="btn" aria-label="Download Playground export as ZIP file">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="28" height="28" aria-hidden="true" focusable="false">
              <path fill="#ffffff" d="M18 11.3l-1-1.1-4 4V3h-1.5v11.3L7 10.2l-1 1.1 6.2 5.8 5.8-5.8zm.5 3.7v3.5h-13V15H4v5h16v-5h-1.5z"></path>
            </svg>
          </button>
          <button id="import-open-modal--btn" class="btn" aria-label="Open Playground import window">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="28" height="28" aria-hidden="true" focusable="false">
              <path fill="#ffffff" d="M18.5 15v3.5H13V6.7l4.5 4.1 1-1.1-6.2-5.8-5.8 5.8 1 1.1 4-4v11.7h-6V15H4v5h16v-5z"></path>
            </svg>
          </button>
        </div>
      </div>
    </div>
    <script type="template" id="browser-mode">
      <div class="fake-window-wrapper full-window">
        <div class="fake-window">
          <div class="outer">
            <div class="dots">
              <div class="dot neutral"></div>
              <div class="dot neutral"></div>
              <div class="dot neutral"></div>
            </div>

            <form id="url-bar-form">
              <div class="url-bar-container">
                <input name="url" type="text" id="url-bar" autocomplete="off" />
              </div>
              <input type="submit" tabindex="-1" />
            </form>
            <div class="migration-controls">
              <button id="export-playground--btn" class="btn" aria-label="Download Playground export as ZIP file">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="28" height="28" aria-hidden="true" focusable="false">
                  <path fill="#ffffff" d="M18 11.3l-1-1.1-4 4V3h-1.5v11.3L7 10.2l-1 1.1 6.2 5.8 5.8-5.8zm.5 3.7v3.5h-13V15H4v5h16v-5h-1.5z"></path>
                </svg>
              </button>
              <button id="import-open-modal--btn" class="btn" aria-label="Open Playground import window">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="28" height="28" aria-hidden="true" focusable="false">
                  <path fill="#ffffff" d="M18.5 15v3.5H13V6.7l4.5 4.1 1-1.1-6.2-5.8-5.8 5.8 1 1.1 4-4v11.7h-6V15H4v5h16v-5z"></path>
                </svg>
              </button>
            </div>
          </div>
          <div class="main-content">
            <div class="progress-bar-overlay">
              <h3 class="progress-bar-overlay-caption">Preparing WordPress...</h3>
              <div class="progress-bar-wrapper mode-infinite">
                <div class="progress-bar is-infinite"></div>
                <div class="progress-bar is-finite"></div>
              </div>
            </div>
            <iframe id="wp" sandbox="allow-same-origin allow-scripts allow-popups allow-forms allow-downloads"></iframe>
          </div>
          <div style="
               display: flex;
               padding: 10px 22px;
               background: #FFF7CC;
               font-family: 'Andale mono', Helvetica, Monospace, Arial;
               font-style: normal;
               font-weight: 100;
               font-size: 12px;
               line-height: 18px;
               align-items: center;
               color: #1E1E1E;
          ">
              This is a cool fun experimental WordPress running in your browser :) All your changes are private and gone after a page refresh.
          </div>
        </div>
      </div>
    </script>
    <script type="template" id="seamless-mode">
      <div class="progress-bar-overlay">
        <h3 class="progress-bar-overlay-caption">Preparing WordPress...</h3>
        <div class="progress-bar-wrapper mode-infinite">
          <div class="progress-bar is-infinite"></div>
          <div class="progress-bar is-finite"></div>
        </div>
      </div>
      <iframe id="wp" class="full-window"></iframe>
    </script>
    <script>
      const query = new URL(document.location.href).searchParams;
      const appMode = query.get('mode') === 'seamless' ? 'seamless' : 'browser';

      // Setup the UI
      (function() {
        const appRoot = document.getElementById('app-root');
        if(appMode === 'seamless') {
          document.body.classList.add('seamless-mode');
          appRoot.innerHTML = document.querySelector('#seamless-mode').innerHTML;
        } else {
          document.body.classList.add('browser-mode');
          appRoot.innerHTML = document.querySelector('#browser-mode').innerHTML;
        }
      })();
    </script>

    <script src="./app.tsx" type="module"></script>
  </body>
</html>
